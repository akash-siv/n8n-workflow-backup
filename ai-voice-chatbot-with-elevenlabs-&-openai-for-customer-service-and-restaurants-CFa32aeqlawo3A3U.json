{"createdAt":"2025-04-05T15:07:23.396Z","updatedAt":"2025-04-05T15:07:23.396Z","id":"CFa32aeqlawo3A3U","name":"AI Voice Chatbot with ElevenLabs & OpenAI for Customer Service and Restaurants","active":false,"nodes":[{"parameters":{"promptType":"define","text":"={{ $json.body.question }}","options":{}},"id":"b194b397-b51b-4211-8ca1-787071aaac7d","name":"AI Agent","type":"@n8n/n8n-nodes-langchain.agent","position":[500,1760],"typeVersion":1.7},{"parameters":{"name":"company","description":"Risponde alle domande relative a ciò che ti viene chiesto"},"id":"f27c213b-35a9-4f27-a72f-8f0d26cf75ee","name":"Vector Store Tool","type":"@n8n/n8n-nodes-langchain.toolVectorStore","position":[700,2000],"typeVersion":1},{"parameters":{"qdrantCollection":{"__rl":true,"mode":"id","value":"=COLLECTION"},"options":{}},"id":"8d593f66-cc31-4ba6-924a-1ef66d59a299","name":"Qdrant Vector Store","type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","position":[540,2260],"typeVersion":1},{"parameters":{"options":{}},"id":"7fd76d5b-3ae8-4721-aa44-ab4e7a8f0203","name":"Embeddings OpenAI","type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","position":[540,2420],"typeVersion":1.1},{"parameters":{"content":"# STEP 4\n\n## RAG System\n\nClick on \"test workflow\" on n8n and \"Test AI agent\" on ElevenLabs. If everything is configured correctly, when you ask a question to the agent, the webhook on n8n is activated with the \"question\" field in the body filled with the question asked to the voice agent.\n\nThe AI ​​Agent will extract the information from the vector database, send it to the model to create the response which will be sent via the response webhook to ElevenLabs which will transform it into voice","height":240,"width":1400,"color":5},"id":"ad295e36-5a49-46e5-8443-c922d86ba117","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[-80,1480],"typeVersion":1},{"parameters":{"content":"# STEP 1\n\n## Create an Agent on ElevenLabs \n- Create an agent on ElevenLabs (eg. test_n8n)\n- Add \"First message\" (eg. Hi, Can I help you?)\n- Add the \"System Prompt\" message... eg:\n'You are the waiter of \"Pizzeria da Michele\" in Verona. If you are asked a question, use the tool \"test_chatbot_elevenlabs\". When you receive the answer from \"test_chatbot_elevenlabs\" answer the user clearly and precisely.'\n- In Tools add a Webhook called eg. \"test_chatbot_elevenlabs\" and add the following description:\n'You are the waiter. Answer the questions asked and store them in the question field.'\n- Add the n8n webhook URL (method POST)\n- Enable \"Body Parameters\" and insert in the description \"Ask the user the question to ask the place.\", then in the \"Properties\" add a data type string called \"question\", value type \"LLM Prompt\" and description \"user question\"","height":360,"width":1420,"color":3},"id":"dffa85f0-8e47-4049-a203-75ec0c782dac","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-100,80],"typeVersion":1},{"parameters":{},"id":"9de46832-326b-4aea-86bd-35a6c8dc66e5","name":"When clicking ‘Test workflow’","type":"n8n-nodes-base.manualTrigger","position":[-60,760],"typeVersion":1},{"parameters":{"method":"POST","url":"https://QDRANTURL/collections/COLLECTION","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"{\n  \"filter\": {}\n}","options":{}},"id":"362f532f-91d3-41b1-8f2e-ee56d5de89c9","name":"Create collection","type":"n8n-nodes-base.httpRequest","position":[240,620],"typeVersion":4.2},{"parameters":{"method":"POST","url":"https://QDRANTURL/collections/COLLECTION/points/delete","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"{\n  \"filter\": {}\n}","options":{}},"id":"4c85e805-6487-4b0c-8ea3-1575c8f6b92c","name":"Refresh collection","type":"n8n-nodes-base.httpRequest","position":[240,880],"typeVersion":4.2},{"parameters":{"resource":"fileFolder","filter":{"driveId":{"__rl":true,"mode":"list","value":"My Drive","cachedResultUrl":"https://drive.google.com/drive/my-drive","cachedResultName":"My Drive"},"folderId":{"__rl":true,"mode":"id","value":"=test-whatsapp"}},"options":{}},"id":"fbae4675-4ec6-466f-a7ac-577a771b3b32","name":"Get folder","type":"n8n-nodes-base.googleDrive","position":[460,880],"typeVersion":3},{"parameters":{"operation":"download","fileId":{"__rl":true,"mode":"id","value":"={{ $json.id }}"},"options":{"googleFileConversion":{"conversion":{"docsToFormat":"text/plain"}}}},"id":"ddd1b9d1-f1c3-495b-876a-874fc2c1a0bb","name":"Download Files","type":"n8n-nodes-base.googleDrive","position":[680,880],"typeVersion":3},{"parameters":{"dataType":"binary","options":{}},"id":"9a822201-ea74-43e7-b4cd-26811d57b5ff","name":"Default Data Loader","type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","position":[1060,1080],"typeVersion":1},{"parameters":{"chunkSize":300,"chunkOverlap":30},"id":"e6d21fb3-4e88-4538-8c20-d0fc0d9480f1","name":"Token Splitter","type":"@n8n/n8n-nodes-langchain.textSplitterTokenSplitter","position":[1040,1240],"typeVersion":1},{"parameters":{"content":"# STEP 2\n\n## Create Qdrant Collection\nChange:\n- QDRANTURL\n- COLLECTION","height":220,"width":880,"color":6},"id":"5d8cf055-0feb-4998-809c-26866b2c7f02","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[440,560],"typeVersion":1},{"parameters":{"mode":"insert","qdrantCollection":{"__rl":true,"mode":"id","value":"=COLLECTION"},"options":{}},"id":"76677826-22c6-4775-82c6-6ee50a9cfe53","name":"Qdrant Vector Store1","type":"@n8n/n8n-nodes-langchain.vectorStoreQdrant","position":[920,880],"typeVersion":1},{"parameters":{"options":{}},"id":"b4b8bc83-4e51-40f6-8740-fdf241fdf30b","name":"Embeddings OpenAI1","type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","position":[900,1080],"typeVersion":1.1},{"parameters":{"content":"# STEP 3\n\n\n\n\n\n\n\n\n\n\n\n\n## Documents vectorization with Qdrant and Google Drive\nChange:\n- QDRANTURL\n- COLLECTION","height":400,"width":620,"color":4},"id":"caf40a58-8303-4bd6-b711-a777a69ac0f5","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","position":[220,820],"typeVersion":1},{"parameters":{"options":{}},"id":"b0e8cfee-e3f2-433c-b965-cb3ea4770fe0","name":"Respond to ElevenLabs","type":"n8n-nodes-base.respondToWebhook","position":[1060,1760],"typeVersion":1.1},{"parameters":{"options":{}},"id":"49a50693-ed0e-4478-862e-ed552225d747","name":"OpenAI","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[380,2000],"typeVersion":1},{"parameters":{"httpMethod":"POST","path":"test_voice_message_elevenlabs","responseMode":"responseNode","options":{}},"id":"a955e93d-5231-4b8c-8477-87eeac15c926","name":"Listen","type":"n8n-nodes-base.webhook","position":[-20,1760],"webhookId":"e9f611eb-a8dd-4520-8d24-9f36deaca528","typeVersion":2},{"parameters":{},"id":"b3b6847e-1361-423c-a350-cbc21e09ae26","name":"Window Buffer Memory","type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","position":[540,2000],"typeVersion":1.3},{"parameters":{"options":{}},"id":"f784a4e7-1368-45da-862d-3870a1f5e17e","name":"OpenAI Chat Model","type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","position":[880,2280],"typeVersion":1},{"parameters":{"content":"# STEP 5\n\n## Add Widget\n\nAdd the widget to your business website by replacing AGENT_ID with the agent id you created on ElevenLabs\n\n<elevenlabs-convai agent-id=\"AGENT_ID\"></elevenlabs-convai><script src=\"https://elevenlabs.io/convai-widget/index.js\" async type=\"text/javascript\"></script>","height":240,"width":1400,"color":7},"id":"e9cb6baf-5f47-4a02-94e3-96e6fa3143e9","name":"Sticky Note6","type":"n8n-nodes-base.stickyNote","position":[-80,2580],"typeVersion":1}],"connections":{"Listen":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenAI":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[{"node":"Respond to ElevenLabs","type":"main","index":0}]]},"Get folder":{"main":[[{"node":"Download Files","type":"main","index":0}]]},"Download Files":{"main":[[{"node":"Qdrant Vector Store1","type":"main","index":0}]]},"Token Splitter":{"ai_textSplitter":[[{"node":"Default Data Loader","type":"ai_textSplitter","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Qdrant Vector Store","type":"ai_embedding","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"Vector Store Tool","type":"ai_languageModel","index":0}]]},"Vector Store Tool":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"Qdrant Vector Store1","type":"ai_embedding","index":0}]]},"Refresh collection":{"main":[[{"node":"Get folder","type":"main","index":0}]]},"Default Data Loader":{"ai_document":[[{"node":"Qdrant Vector Store1","type":"ai_document","index":0}]]},"Qdrant Vector Store":{"ai_vectorStore":[[{"node":"Vector Store Tool","type":"ai_vectorStore","index":0}]]},"Window Buffer Memory":{"ai_memory":[[{"node":"AI Agent","type":"ai_memory","index":0}]]},"When clicking ‘Test workflow’":{"main":[[{"node":"Create collection","type":"main","index":0},{"node":"Refresh collection","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"8b4dadc2-a663-4977-99ee-e3728f868321","triggerCount":0,"tags":[]}